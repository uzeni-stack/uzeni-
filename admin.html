<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boos - Administrace</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #2c3e50; color: white; margin: 0; padding: 20px; text-align: center; }
        .login-box { max-width: 300px; margin: 100px auto; background: #34495e; padding: 20px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        input { width: 100%; padding: 12px; margin: 10px 0; border: none; border-radius: 5px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; border: none; border-radius: 5px; background: #27ae60; color: white; font-weight: bold; cursor: pointer; }
        
        #admin-content { display: none; }
        
        .menu-grid { display: grid; grid-template-columns: 1fr; gap: 15px; max-width: 400px; margin: auto; }
        .menu-item { background: #3498db; color: white; padding: 25px; text-decoration: none; border-radius: 12px; font-weight: bold; font-size: 1.2em; box-shadow: 0 4px 0 #2980b9; }
        .menu-item:active { transform: translateY(4px); box-shadow: none; }
        
        .setup-box { background: white; color: #333; padding: 20px; border-radius: 12px; margin-top: 30px; text-align: left; }
        .prod-list-item { display: flex; justify-content: space-between; align-items: center; padding: 5px 0; border-bottom: 1px solid #eee; }
    </style>
</head>
<body>

    <div id="login-screen" class="login-box">
        <h2>VSTUP PRO BOOSE</h2>
        <input type="password" id="heslo" placeholder="Zadej heslo">
        <button onclick="overit()">VSTOUPIT</button>
    </div>

    <div id="admin-content">
        <h1>V√≠tej, Boosi!</h1>
        
        <div class="menu-grid">
            <a href="rozpis.html" class="menu-item">‚öñÔ∏è V√Å≈ΩEN√ç U UD√çRNY</a>
            <a href="finance.html" class="menu-item">üí∞ MOJE FINANCE</a>
        </div>

        <div class="setup-box">
            <h3>üõ†Ô∏è SPR√ÅVA NAB√çDKY</h3>
            <p style="font-size: 0.9em; color: #666;">Co zde p≈ôid√°≈°, uvid√≠ z√°kazn√≠ci v e-shopu:</p>
            <input type="text" id="p-nazev" placeholder="N√°zev (nap≈ô. B≈Øƒçek)" style="border: 1px solid #ccc;">
            <input type="number" id="p-cena" placeholder="Cena za kg" style="border: 1px solid #ccc;">
            <button onclick="pridatDoNabidky()">P≈òIDAT DO NAB√çDKY</button>
            <hr>
            <div id="seznam-nabidky"></div>
        </div>
        
        <button onclick="odhlasit()" style="margin-top:40px; background:#e74c3c; width:auto; padding:10px 20px;">ODHL√ÅSIT SE</button>
    </div>

<script>
    const firebaseConfig = { databaseURL: "https://eshop-fh-default-rtdb.europe-west1.firebasedatabase.app" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    function overit() {
        const h = document.getElementById("heslo").value;
        if (h === "boos123") { // Heslo si m≈Ø≈æe≈° zmƒõnit
            sessionStorage.setItem("priblasen", "ano");
            zobrazAdmin();
        } else {
            alert("≈†patn√© heslo!");
        }
    }

    function zobrazAdmin() {
        if (sessionStorage.getItem("priblasen") === "ano") {
            document.getElementById("login-screen").style.display = "none";
            document.getElementById("admin-content").style.display = "block";
            nactiNabidku();
        }
    }

    function odhlasit() {
        sessionStorage.removeItem("priblasen");
        location.reload();
    }

    function nactiNabidku() {
        db.ref("produkty").on("value", (snap) => {
            const data = snap.val() || {};
            const div = document.getElementById("seznam-nabidky");
            div.innerHTML = "<b>Aktu√°ln√≠ nab√≠dka:</b>";
            for (let n in data) {
                div.innerHTML += `
                    <div class="prod-list-item">
                        <span>${n} (${data[n]} Kƒç)</span>
                        <button onclick="smazatNabidku('${n}')" style="background:none; color:red; width:auto; padding:0; cursor:pointer;">[SMAZAT]</button>
                    </div>`;
            }
        });
    }

    function pridatDoNabidky() {
        const n = document.getElementById("p-nazev").value;
        const c = document.getElementById("p-cena").value;
        if (n && c) {
            db.ref("produkty/" + n).set(parseInt(c));
            document.getElementById("p-nazev").value = "";
            document.getElementById("p-cena").value = "";
        }
    }

    function smazatNabidku(n) {
        if (confirm("Opravdu smazat " + n + " z e-shopu?")) db.ref("produkty/" + n).remove();
    }

    zobrazAdmin();
</script>

</body>
</html>
