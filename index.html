<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E-shop - Objedn치vka</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: sans-serif; background: #f9f9f9; padding: 20px; }
        .karta { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; max-width: 500px; margin-left: auto; margin-right: auto; }
        .btn { background: #d32f2f; color: white; border: none; width: 100%; padding: 12px; border-radius: 5px; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        select { width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid #ccc; }
    </style>
</head>
<body>
    <h1 style="text-align:center;">游볼 NAE NAB칈DKA</h1>
    <div id="nabidka"></div>
<script>
    const firebaseConfig = { databaseURL: "https://eshop-fh-default-rtdb.europe-west1.firebasedatabase.app" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    db.ref("produkty").on("value", (snap) => {
        const produkty = snap.val() || {};
        const container = document.getElementById("nabidka");
        container.innerHTML = "";
        for (let nazev in produkty) {
            container.innerHTML += `
                <div class="karta">
                    <h2>${nazev}</h2>
                    <p>Cena: ${produkty[nazev]} K캜/kg</p>
                    <select id="vaha-${nazev}">
                        <option value="0.5">0.5 kg</option>
                        <option value="1.0" selected>1.0 kg</option>
                        <option value="2.0">2.0 kg</option>
                    </select>
                    <button class="btn" onclick="objednat('${nazev}')">Objednat</button>
                </div>`;
        }
    });

    function objednat(produkt) {
        const vaha = document.getElementById("vaha-" + produkt).value;
        const jmeno = prompt("Tvoje jm칠no:");
        if (jmeno) {
            // Tady je ten z치pis do VLASTN칈HO listu
            db.ref("objednavky/" + produkt).push({
                zakaznik: jmeno,
                vaha: vaha,
                skutecna_vaha_gr: 0,
                zaplaceno: 0
            }).then(() => alert("Objedn치no!"));
        }
    }
</script>
</body>
</html>
